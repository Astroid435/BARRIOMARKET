{% load static %}
{% include 'inc/header.html' %}

<div class="container mt-4">
    <h2 class="mb-4">Listado de Ventas</h2>
    {% if ventas %}
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Administrador</th>
                    <th>Documento Cliente</th>
                    <th>Valor Total</th>
                    <th>Detalles del pedido</th>
                </tr>
            </thead>
            <tbody>
                {% for venta in ventas %}
                <tr>
                    <td>{{ venta.Fecha|date:"Y-m-d H:i:s" }}</td>
                    <td>
                        {{ venta.Usuario_DocumentoAdministrador.Primer_nombre }}
                        {{ venta.Usuario_DocumentoAdministrador.Primer_apellido }}
                    </td>
                    <td>{{ venta.DocumentoCliente }}</td>
                    <td>${{ venta.ValorTotal }}</td>
                    <td>
                        <a href="{% url 'DetalleVenta' venta.id_ventas  %}" class="btn btn-info btn-sm">
                            Ver Detalles
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center">
                        No hay ventas registradas en el sistema.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info" role="alert">
        No hay ventas registradas.
    </div>
    {% endif %}

    <br>
    <hr><br>

    <h2 class="mb-4">Listado de Devoluciones</h2>
    {% if devoluciones %}
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Motivo</th>
                    <th>Fecha de Cancelación</th>
                    <th>Usuario que canceló</th>
                    <th>Valor de Devolución</th>
                </tr>
            </thead>
            <tbody>
                {% for devolucion in devoluciones %}
                <tr>
                    <td>{{ devolucion.motivo }}</td>
                    <td>{{ devolucion.fecha_cancelacion|date:"Y-m-d H:i:s" }}</td>
                    <td>{{ devolucion.usuario.Primer_nombre }} {{ devolucion.usuario.Primer_apellido }}</td>
                    <td>${{ devolucion.valor }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center">
                        No hay devoluciones registradas en el sistema.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info" role="alert">
        No hay devoluciones registradas.
    </div>
    {% endif %}



</div>


{% include 'inc/footer.html' %}